<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="A few clues on creating a Jazz on Docker image.">
<meta name="keywords" content=" ">
<title>How to build your own Jazz Docker image | Jazz User's Manual</title>
<link rel="stylesheet" href="css/syntax.css">

<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="css/modern-business.css">
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<link rel="stylesheet" href="css/customstyles.css">
<link rel="stylesheet" href="css/boxshadowproperties.css">
<!-- most color styles are extracted out to here -->
<link rel="stylesheet" href="css/theme-blue.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="js/jquery.navgoco.min.js"></script>


<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Anchor.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
<script src="js/toc.js"></script>
<script src="js/customscripts.js"></script>

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    <script>
        $(document).ready(function() {
            $("#tg-sb-link").click(function() {
                $("#tg-sb-sidebar").toggle();
                $("#tg-sb-content").toggleClass('col-md-9');
                $("#tg-sb-content").toggleClass('col-md-12');
                $("#tg-sb-icon").toggleClass('fa-toggle-on');
                $("#tg-sb-icon").toggleClass('fa-toggle-off');
            });
        });
    </script>
    

</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-static-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-home fa-lg navbar-brand" href="index.html">&nbsp;<span class="projectTitle"> Jazz User's Manual</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- toggle sidebar button -->
                <li><a id="tg-sb-link" href="#"><i id="tg-sb-icon" class="fa fa-toggle-on"></i> Nav</a></li>
                <!-- entries without drop-downs appear here -->




                
                
                
                <li><a href="http://kaalam.ai" target="_blank">kaalam.ai</a></li>
                
                
                
                <li><a href="https://github.com/bbvadata/Jazz" target="_blank">GitHub</a></li>
                
                
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Quick Help<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        <li><a href="vision_intro_page.html">What is the vision? What does Jazz want to become?</a></li>
                        
                        
                        
                        <li><a href="reference_docker_latest_server.html">Where can I find the Latest Stable Server (Jazz LSS)?</a></li>
                        
                        
                        
                        <li><a href="contributing_welcome_all.html">How can I help?</a></li>
                        
                        
                        
                        <li><a href="/develop/" target="_blank">Jazz for developers</a></li>
                        
                        
                        
                        <li><a href="api_ref_elements.html">Jazz API reference</a></li>
                        
                        
                        
                        <li><a href="/rjazz/" target="_blank">R client Reference</a></li>
                        
                        
                        
                        <li><a href="using_jazz_today.html">What is the usable part of Jazz today?</a></li>
                        
                        
                    </ul>
                </li>
                
                
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
  <div id="main">
    <!-- Content Row -->
    <div class="row">
        
        
            <!-- Sidebar Column -->
            <div class="col-md-3" id="tg-sb-sidebar">
                

<ul id="mysidebar" class="nav">
  <li class="sidebarTitle">Jazz 0.4.1</li>
  
  
  
  <li>
      <a href="#">Basic questions on Jazz</a>
      <ul>
          
          
          
          <li><a href="index.html">Welcome to Jazz!</a></li>
          
          
          
          
          
          
          <li><a href="vision_intro_page.html">What is the vision? What does Jazz want to be?</a></li>
          
          
          
          <li class="subfolders">
              <a href="#">The vision</a>
              <ul>
                  
                  
                  
                  <li><a href="vision_blocks_containers.html">Blocks, Filestores and Containers</a></li>
                  
                  
                  
                  
                  
                  <li><a href="vision_bop_fields_contexts.html">Bebop, Fields and Contexts</a></li>
                  
                  
                  
                  
                  
                  <li><a href="vision_relations_finder.html">Relations and the Finder</a></li>
                  
                  
                  
                  
                  
                  <li><a href="vision_apis_services.html">APIs and Services</a></li>
                  
                  
                  
              </ul>
          </li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Bebop fundamentals</a>
      <ul>
          
          
          
          <li><a href="bop_ref_elements.html">Bebop elements</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">API fundamentals</a>
      <ul>
          
          
          
          <li><a href="api_ref_elements.html">API elements</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Docker reference</a>
      <ul>
          
          
          
          <li class="active"><a href="reference_docker_how_to_build.html">How to build your own Jazz Docker image</a></li>
          
          
          
          
          
          
          <li><a href="reference_docker_latest_server.html">Jazz (LSS) Latest Stable Server</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Server Reference</a>
      <ul>
          
          
          
          <li><a href="reference_server_setup.html">Server internals and setup</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Using Jazz</a>
      <ul>
          
          
          
          <li><a href="using_jazz_today.html">What is the usable part of Jazz today?</a></li>
          
          
          
          
          
          
          <li><a href="using_compile_jazz.html">How can I compile Jazz and the clients?</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Contributing to Jazz</a>
      <ul>
          
          
          
          <li><a href="contributing_welcome_all.html">How can I help? What kind of skills are needed?</a></li>
          
          
          
          
      </ul>
   </li>
     
      
      
      <!-- if you aren't using the accordion, uncomment this block:
         <p class="external">
             <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
         </p>
         -->
</ul>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

            </div>
            
        

        <!-- Content Column -->
        <div class="col-md-9" id="tg-sb-content">
            <div class="post-header">
   <h1 class="post-title-main">How to build your own Jazz Docker image</h1>
</div>



<div class="post-content">

   
    <div class="summary">A few clues on creating a Jazz on Docker image.</div>
   

    
    
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.

$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2,h3,h4' });

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 10);
  return false
})
  
});
</script>

<div id="toc"></div>

    


    


    

  <h2 id="links-on-docker-and-docker-hub">Links on Docker and Docker Hub</h2>

<p><span class="label label-info">Getting started with Docker</span></p>

<p>You can check these links if you need to know about Docker.</p>

<ul>
  <li><a href="https://www.docker.com/resources/what-container">What is a Docker container?</a></li>
  <li><a href="https://docs.docker.com/get-started/">Starting with Docker</a></li>
  <li><a href="https://docs.docker.com/docker-hub/">What is Docker Hub</a></li>
</ul>

<h2 id="building-by-example">Building by example</h2>

<p><span class="label label-info">Building your image</span></p>

<p>This example taken from the LSS shows how to build a Docker image and update it to Docker Hub.</p>

<div class="alert alert-success" role="alert"><i class="fa fa-check-square-o"></i> <b>Tip:</b> <strong>Prerequisites</strong> This assumes that you have Docker installed, the Jazz repository cloned and ./config.sh
was run successfully. You should start inside the docker folder.</div>

<div class="alert alert-info" role="alert"><i class="fa fa-info-circle"></i> <b>Note:</b> Of course, you should own a Docker Hub account, modify paths and use your credentials when asked.</div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>

<span class="nv">docker_pwd</span><span class="o">=</span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>

<span class="nb">cd</span> ../server <span class="o">||</span> <span class="k">return </span>1

make jazz
<span class="nb">cp </span>jazz ../docker
make clean

<span class="nb">cd</span> <span class="s2">"</span><span class="nv">$docker_pwd</span><span class="s2">"</span> <span class="o">||</span> <span class="k">return </span>1

<span class="nb">cp</span> ../server/config/jazz_config.ini <span class="nb">.</span>

docker build <span class="nt">-t</span> jazz_ref_stable <span class="nb">.</span>

docker login

docker tag jazz_ref_stable kaalam/jazz_neat:0.3.1
docker push kaalam/jazz_neat:0.3.1

<span class="nb">rm </span>jazz
<span class="nb">rm </span>jazz_config.ini
</code></pre></div></div>

<p>You can use this to run the docker image in debug mode (allowing login into the Linux image).</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run <span class="nt">-p8888</span>:8888 <span class="nt">-ti</span> kaalam/jazz_neat:0.2.0.99 /bin/bash
</code></pre></div></div>

<p>Use this to run the image you just created.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run <span class="nt">-p8888</span>:8888 kaalam/jazz_neat:0.2.0.99
</code></pre></div></div>

<p>This example (implicitly) refers to a Dockerfile that tell Docker how to build the image</p>

<div class="language-docker highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">FROM</span><span class="s"> ubuntu</span>

<span class="k">MAINTAINER</span><span class="s"> kaalam.ai</span>

<span class="k">WORKDIR</span><span class="s"> /home/jadmin</span>

<span class="k">RUN </span>apt-get update <span class="o">&amp;&amp;</span> apt-get <span class="nb">install</span> <span class="nt">-y</span> libmicrohttpd-dev

<span class="k">RUN </span><span class="nb">ln</span> <span class="nt">-s</span> /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10 /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.12

<span class="k">RUN </span><span class="nb">mkdir</span> /home/jadmin/mdb

<span class="k">ADD</span><span class="s"> ./start.sh /home/jadmin</span>
<span class="k">ADD</span><span class="s"> ./jazz /home/jadmin</span>
<span class="k">ADD</span><span class="s"> ./jazz_config.ini /home/jadmin/config/jazz_config.ini</span>

<span class="k">EXPOSE</span><span class="s"> 8888</span>

<span class="k">CMD</span><span class="s"> ["/home/jadmin/start.sh"]</span>
</code></pre></div></div>

<div class="alert alert-success" role="alert"><i class="fa fa-check-square-o"></i> <b>Tip:</b> To make it more efficient, you can group all the ADD commands into one joining them with “+”.</div>

<p>The start.sh file is found in the docker folder, but it’s just a call to <code class="highlighter-rouge">jazz start</code>.</p>

<div class="alert alert-warning" role="alert"><i class="fa fa-warning"></i> <b>Important:</b> The previous example does not include loading anything into the Jazz server. For a more realistic
application, you should develop using a development server. Then, persist the state of the JazzSource object containing all the magic
and make a copy of that file into your Docker image. To tell Jazz to open that JazzSource, you can simply use the http interface.
Even if the JazzSource is on the server, you have to open it to make the server learn all the urls in order to have your application
working.</div>






</div>



<footer>
            <div class="row">
                <div class="col-lg-12 footer">
               &copy;2020 kaalam.ai. All rights reserved. <br />
 Site last generated: Jan 26, 2020 <br />
<p><img src="images/company_logo.png" alt="Company logo"/></p>
                </div>
            </div>
</footer>


        </div>
    <!-- /.row -->
</div>
<!-- /.container -->
</div>
<!-- /#main -->
    </div>

</body>

</html>
