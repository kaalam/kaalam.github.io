<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Current consensus on how the Bebop vision has to be implemented at compiler/executor level.">
<meta name="keywords" content=" ">
<title>Bebop | Jazz User's Manual</title>
<link rel="stylesheet" href="css/syntax.css">

<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="css/modern-business.css">
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<link rel="stylesheet" href="css/customstyles.css">
<link rel="stylesheet" href="css/boxshadowproperties.css">
<!-- most color styles are extracted out to here -->
<link rel="stylesheet" href="css/theme-blue.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="js/jquery.navgoco.min.js"></script>


<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Anchor.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
<script src="js/toc.js"></script>
<script src="js/customscripts.js"></script>

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    <script>
        $(document).ready(function() {
            $("#tg-sb-link").click(function() {
                $("#tg-sb-sidebar").toggle();
                $("#tg-sb-content").toggleClass('col-md-9');
                $("#tg-sb-content").toggleClass('col-md-12');
                $("#tg-sb-icon").toggleClass('fa-toggle-on');
                $("#tg-sb-icon").toggleClass('fa-toggle-off');
            });
        });
    </script>
    

</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-static-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-home fa-lg navbar-brand" href="index.html">&nbsp;<span class="projectTitle"> Jazz User's Manual</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- toggle sidebar button -->
                <li><a id="tg-sb-link" href="#"><i id="tg-sb-icon" class="fa fa-toggle-on"></i> Nav</a></li>
                <!-- entries without drop-downs appear here -->




                
                
                
                <li><a href="http://kaalam.ai" target="_blank">kaalam.ai</a></li>
                
                
                
                <li><a href="https://github.com/bbvadata/Jazz" target="_blank">GitHub</a></li>
                
                
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Quick Help<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        <li><a href="basics_jazz_vision.html">What is the vision? What does Jazz want to become?</a></li>
                        
                        
                        
                        <li><a href="starting_trying_out_poc.html">What simple Proof of Concept can I do without compiling anything?</a></li>
                        
                        
                        
                        <li><a href="contributing_welcome_all.html">How can I help?</a></li>
                        
                        
                        
                        <li><a href="/develop/" target="_blank">Jazz for developers</a></li>
                        
                        
                        
                        <li><a href="reference_api_top.html">Jazz API reference</a></li>
                        
                        
                        
                        <li><a href="/rjazz/" target="_blank">R client Reference</a></li>
                        
                        
                        
                        <li><a href="basics_jazz_today.html">What is the usable part of Jazz today?</a></li>
                        
                        
                    </ul>
                </li>
                
                
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
  <div id="main">
    <!-- Content Row -->
    <div class="row">
        
        
            <!-- Sidebar Column -->
            <div class="col-md-3" id="tg-sb-sidebar">
                

<ul id="mysidebar" class="nav">
  <li class="sidebarTitle">Jazz 0.4.1</li>
  
  
  
  <li>
      <a href="#">Basic questions on Jazz</a>
      <ul>
          
          
          
          <li><a href="index.html">Welcome to Jazz!</a></li>
          
          
          
          
          
          
          <li><a href="basics_jazz_vision.html">What is the vision? What does Jazz want to be?</a></li>
          
          
          
          <li class="subfolders">
              <a href="#">The vision</a>
              <ul>
                  
                  
                  
                  <li><a href="vision_blocks_keeprs.html">Blocks and keeprs</a></li>
                  
                  
                  
                  
                  
                  <li><a href="vision_core_functions.html">Core functions</a></li>
                  
                  
                  
                  
                  
                  <li><a href="vision_distributed_containers.html">Distributed containers</a></li>
                  
                  
                  
                  
                  
                  <li><a href="vision_bebop.html">Bebop, classes, functions and operators</a></li>
                  
                  
                  
                  
                  
                  <li><a href="vision_apis_http.html">APIs, Jazz as a server or a package</a></li>
                  
                  
                  
              </ul>
          </li>
          
          
          
          
          
          
          <li><a href="basics_jazz_today.html">What is the usable part of Jazz today?</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Using Jazz</a>
      <ul>
          
          
          
          <li><a href="starting_trying_out_poc.html">What simple Proof of Concept can I do using pre-built packages?</a></li>
          
          
          
          
          
          
          <li><a href="starting_compile_jazz.html">How can I compile Jazz and the clients?</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Contributing to Jazz</a>
      <ul>
          
          
          
          <li><a href="contributing_welcome_all.html">How can I help? What kind of skills are needed?</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Server Reference</a>
      <ul>
          
          
          
          <li><a href="reference_top_jazz_internals.html">Server internals and setup</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">API reference</a>
      <ul>
          
          
          
          <li><a href="reference_api_top.html">API reference</a></li>
          
          
          
          <li class="subfolders">
              <a href="#">API element reference</a>
              <ul>
                  
                  
                  
                  <li><a href="reference_api_elements.html">API elements</a></li>
                  
                  
                  
                  
                  
                  <li><a href="reference_api_block_constructors.html">Block constructors</a></li>
                  
                  
                  
                  
                  
                  <li><a href="reference_api_block_selections.html">Block selections</a></li>
                  
                  
                  
                  
                  
                  <li><a href="reference_api_block_attributes.html">Block attributes</a></li>
                  
                  
                  
                  
                  
                  <li><a href="reference_api_predicates.html">Predicates</a></li>
                  
                  
                  
                  
                  
                  <li><a href="reference_api_predicate_modifiers.html">Predicate modifiers</a></li>
                  
                  
                  
                  
                  
                  <li><a href="reference_api_lvalue.html">Lvalues</a></li>
                  
                  
                  
                  
                  
                  <li><a href="reference_api_rvalue.html">Rvalues</a></li>
                  
                  
                  
              </ul>
          </li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Bebop reference</a>
      <ul>
          
          
          
          <li class="active"><a href="reference_bop_top.html">Bebop</a></li>
          
          
          
          <li class="subfolders">
              <a href="#">Language basics</a>
              <ul>
                  
                  
                  
                  <li><a href="reference_bop_basics.html">Language basics</a></li>
                  
                  
                  
              </ul>
          </li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Docker reference</a>
      <ul>
          
          
          
          <li><a href="reference_docker_how_to_build.html">How to build your own Jazz Docker image</a></li>
          
          
          
          <li class="subfolders">
              <a href="#">Jazz "&agrave; la carte"</a>
              <ul>
                  
                  
                  
                  <li><a href="reference_docker_latest_server.html">Jazz (LSS) Latest Stable Server</a></li>
                  
                  
                  
              </ul>
          </li>
          
          
          
          
      </ul>
   </li>
     
      
      
      <!-- if you aren't using the accordion, uncomment this block:
         <p class="external">
             <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
         </p>
         -->
</ul>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

            </div>
            
        

        <!-- Content Column -->
        <div class="col-md-9" id="tg-sb-content">
            <div class="post-header">
   <h1 class="post-title-main">Bebop</h1>
</div>



<div class="post-content">

   
    <div class="summary">Current consensus on how the Bebop vision has to be implemented at compiler/executor level.</div>
   

    
    
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.

$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2,h3,h4' });

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 10);
  return false
})
  
});
</script>

<div id="toc"></div>

    


    


    

  <h2 id="implementing-bebop">Implementing Bebop.</h2>

<div class="alert alert-warning" role="alert"><i class="fa fa-warning"></i> <b>Important:</b> Bebop is not yet implemented. Needless to say, this reference only reflects current consensus on what
should be implemented to cover all intended functionality while keeping development clean and leveraging on existing OSS solutions
to build in time and quality.</div>

<h2 id="the-compilerexecution-pipeline">The compiler/execution pipeline.</h2>

<figure><img class="docimage" src="images/compiler_pipeline.png" alt="" style="max-width: 880px" /><figcaption>Compiler pipeline</figcaption></figure>

<p>This pipeline shows the main compiler and executor logic. Note that the function is a <strong>JazzBlock</strong> with some attributes that make it
executable. The tensor itself contains the bytecode and the source code is stored as an attribute. The function evaluation is a call to
<strong>BopFunctionCall</strong> with some arguments that are <strong>JazzBlock</strong> descendants (including the bytecode) and producing a new <strong>JazzBlock</strong>.</p>

<h2 id="the-compiler">The compiler.</h2>

<p><span class="label label-info">BopLexer</span>
<span class="label label-info">BopParser</span>
<span class="label label-info">BopCodeGen</span></p>

<p>The compilation is triggered automatically when the execution of the bytecode fails, possibly because it was never compiled before.</p>

<div class="alert alert-success" role="alert"><i class="fa fa-check-square-o"></i> <b>Tip:</b> Bytecode contains references to blocks to maximize efficiency rather than just sequences of owner names.
When these references are no longer valid, a new compilation may find updated ones or fail.</div>

<p>A successful compilation is a sequence of BopLexer, BopParser and BopCodeGen returning no errors.</p>

<h3 id="boplexer">BopLexer</h3>

<p>The lexer tokenizes the source code removing remarks and space. It identifies names, numbers and operators. It is created using
<a href="https://en.wikipedia.org/wiki/Flex_(lexical_analyser_generator)">flex</a>. The intermediate TL (Token List) is passed to BopParser
instead of the source code. It is not stored in the <strong>JazzBlock</strong>.</p>

<h3 id="bopparser">BopParser</h3>

<p>The parser interprets the operators, absence of operators, parentheses and precedence rules to create a sequence of instructions
to apply. Note that these instructions refer to names whose type are yet unknown or may not even exist. That is why it is called
“abstract”. Imagine the expression “a = b + c*d” produces: “take c, take d, multiply, take b, add, assign to a” but before that
can be executed, we need to find what are a, b, c and d, if they exist at all, if multiply and add are defined for these types,
if the tensor shapes are compatible to be multiplied, etc. The AST (Abstract Syntax Tree) is passed BopCodeGen instead of the TL.
Again, it is not stored in the <strong>JazzBlock</strong>. The parser is built using <a href="https://en.wikipedia.org/wiki/GNU_bison">GNU Bison</a>.</p>

<h3 id="bopcodegen">BopCodeGen</h3>

<p>And finally the code generator creates the bytecode. It takes this list of constants and names and finds how to assign them to existing
resources: blocks, standard core functions, other functions, etc. It will resolve the owning sequences like “a.b.c” by finding the JazzKeepr
a who owns b who is also a JazzKeepr and owns c. It will reference a.b.c by a safe pointer to c. When that safe pointer is no longer usable,
the execution of the function will trigger a new compilation. It will also use the aliases declared in the source code and the standard
library, aliases of operators, etc.</p>

<h2 id="calling-bebop-functions">Calling Bebop functions.</h2>

<p><span class="label label-info">BopFunctionCall</span></p>

<p>As mentioned above, this is the simplest part. A function evaluation takes a <strong>BopFunctionCall</strong> with a JazzBlock that contains the source
code as an attribute and may contain updated bytecode. The process is designed in a similar way to a cache, if the bytecode can execute, it
does, else the block is compiled. Except for debugging purposes, this is the way to compile Bebop code. The function produces a block
that will normally be stored by a JazzKeepr. All the function arguments (possibly including an implicit argument with the class) are
passed too.</p>

<p><br /></p>

<table>
  <tbody>
    <tr>
      <td><span class="label label-default">See also …</span></td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td><span class="label label-info">Next …</span></td>
    </tr>
    <tr>
      <td><a href="vision_bebop.html">Bebop’s vision</a></td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td><a href="reference_bop_basics.html">Language basics</a></td>
    </tr>
  </tbody>
</table>






</div>



<footer>
            <div class="row">
                <div class="col-lg-12 footer">
               &copy;2020 kaalam.ai. All rights reserved. <br />
 Site last generated: Jan 3, 2020 <br />
<p><img src="images/company_logo.png" alt="Company logo"/></p>
                </div>
            </div>
</footer>


        </div>
    <!-- /.row -->
</div>
<!-- /.container -->
</div>
<!-- /#main -->
    </div>

</body>

</html>
