<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="How Jazz nodes talk to each other">
<meta name="keywords" content=" ">
<title>API reference - Using Jazz as a cluster | Jazz User's Manual</title>
<link rel="stylesheet" href="css/syntax.css">

<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="css/modern-business.css">
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<link rel="stylesheet" href="css/customstyles.css">
<link rel="stylesheet" href="css/boxshadowproperties.css">
<!-- most color styles are extracted out to here -->
<link rel="stylesheet" href="css/theme-blue.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="js/jquery.navgoco.min.js"></script>


<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Anchor.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
<script src="js/toc.js"></script>
<script src="js/customscripts.js"></script>

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    <script>
        $(document).ready(function() {
            $("#tg-sb-link").click(function() {
                $("#tg-sb-sidebar").toggle();
                $("#tg-sb-content").toggleClass('col-md-9');
                $("#tg-sb-content").toggleClass('col-md-12');
                $("#tg-sb-icon").toggleClass('fa-toggle-on');
                $("#tg-sb-icon").toggleClass('fa-toggle-off');
            });
        });
    </script>
    

</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-static-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-home fa-lg navbar-brand" href="index.html">&nbsp;<span class="projectTitle"> Jazz User's Manual</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- toggle sidebar button -->
                <li><a id="tg-sb-link" href="#"><i id="tg-sb-icon" class="fa fa-toggle-on"></i> Nav</a></li>
                <!-- entries without drop-downs appear here -->




                
                
                
                <li><a href="http://kaalam.ai" target="_blank">kaalam.ai</a></li>
                
                
                
                <li><a href="https://github.com/kaalam/Jazz" target="_blank">GitHub</a></li>
                
                
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Quick Help<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        <li><a href="vision_intro_page.html">What is the vision? What does Jazz want to become?</a></li>
                        
                        
                        
                        <li><a href="reference_docker_latest_server.html">Where can I find the Latest Stable Server (Jazz LSS)?</a></li>
                        
                        
                        
                        <li><a href="contributing_welcome_all.html">How can I help?</a></li>
                        
                        
                        
                        <li><a href="/develop/" target="_blank">Jazz for developers</a></li>
                        
                        
                        
                        <li><a href="api_ref_intro.html">Jazz API introduction</a></li>
                        
                        
                        
                        <li><a href="using_jazz_today.html">What is the usable part of Jazz today?</a></li>
                        
                        
                    </ul>
                </li>
                
                
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
  <div id="main">
    <!-- Content Row -->
    <div class="row">
        
        
            <!-- Sidebar Column -->
            <div class="col-md-3" id="tg-sb-sidebar">
                

<ul id="mysidebar" class="nav">
  <li class="sidebarTitle">Jazz 0.6.1</li>
  
  
  
  <li>
      <a href="#">Basic questions on Jazz</a>
      <ul>
          
          
          
          <li><a href="index.html">Welcome to Jazz!</a></li>
          
          
          
          
          
          
          <li><a href="vision_intro_page.html">What is the vision? What does Jazz want to be?</a></li>
          
          
          
          <li class="subfolders">
              <a href="#">The vision</a>
              <ul>
                  
                  
                  
                  <li><a href="vision_elements_block_kind_etc.html">Elements - Blocks, Kinds, Tuples</a></li>
                  
                  
                  
                  
                  
                  <li><a href="vision_elements_containers.html">Elements - Containers - One Shot, Channels, Volatile and Persisted</a></li>
                  
                  
                  
                  
                  
                  <li><a href="vision_code_bebop.html">Code Generation - Formal Fields and Bebop</a></li>
                  
                  
                  
                  
                  
                  <li><a href="vision_agency_code.html">Agency - Code Automation</a></li>
                  
                  
                  
              </ul>
          </li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Bebop fundamentals (Jazz 0.6.x)</a>
      <ul>
          
          
          
          <li><a href="bop_elements.html">Bebop elements</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Agency fundamentals (Jazz 0.7.x)</a>
      <ul>
          
          
          
          <li><a href="agency_elements.html">Agency elements</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">API fundamentals</a>
      <ul>
          
          
          
          <li><a href="api_ref_intro.html">API reference - Introduction</a></li>
          
          
          
          
          
          
          <li><a href="api_ref_http_api.html">API reference - The http API</a></li>
          
          
          
          
          
          
          <li><a href="api_ref_const_encoding.html">API reference - Constants and %-encoding</a></li>
          
          
          
          
          
          
          <li><a href="api_ref_slicing.html">API reference - Block and tuple slicing</a></li>
          
          
          
          
          
          
          <li><a href="api_ref_fun_calls.html">API reference - Function calls</a></li>
          
          
          
          
          
          
          <li><a href="api_ref_assign.html">API reference - Assignment calls</a></li>
          
          
          
          
          
          
          <li><a href="api_ref_attributes.html">API reference - Attribute calls</a></li>
          
          
          
          
          
          
          <li><a href="api_ref_serialization.html">API reference - Block serialization calls</a></li>
          
          
          
          
          
          
          <li class="active"><a href="api_ref_jazz_cluster.html">API reference - Using Jazz as a cluster</a></li>
          
          
          
          
          
          
          <li><a href="api_ref_serving_frontend.html">API reference - Using Jazz to serve applications</a></li>
          
          
          
          
          
          
          <li><a href="api_ref_agency_wip.html">API reference - Agency bases (Work in Progress)</a></li>
          
          
          
          
          
          
          <li><a href="api_ref_bebop_wip.html">API reference - Bebop bases (Work in Progress)</a></li>
          
          
          
          
          
          
          <li><a href="api_ref_channel_zmq.html">API reference - Channel base 0-mq</a></li>
          
          
          
          
          
          
          <li><a href="api_ref_channel_bash.html">API reference - Channel base bash</a></li>
          
          
          
          
          
          
          <li><a href="api_ref_channel_file.html">API reference - Channel base file</a></li>
          
          
          
          
          
          
          <li><a href="api_ref_channel_http.html">API reference - Channel base http</a></li>
          
          
          
          
          
          
          <li><a href="api_ref_persisted_lmdb.html">API reference - Persisted base lmdb</a></li>
          
          
          
          
          
          
          <li><a href="api_ref_volatile_deque.html">API reference - Volatile base deque</a></li>
          
          
          
          
          
          
          <li><a href="api_ref_volatile_index.html">API reference - Volatile base index</a></li>
          
          
          
          
          
          
          <li><a href="api_ref_volatile_queue.html">API reference - Volatile base queue</a></li>
          
          
          
          
          
          
          <li><a href="api_ref_volatile_tree.html">API reference - Volatile base tree</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Docker reference</a>
      <ul>
          
          
          
          <li><a href="reference_docker_how_to_build.html">How to build your own Jazz Docker image</a></li>
          
          
          
          
          
          
          <li><a href="reference_docker_base_dockerfile.html">Jazz (BASE) Base Dockerfile</a></li>
          
          
          
          
          
          
          <li><a href="reference_docker_latest_server.html">Jazz (LSS) Latest Stable Server</a></li>
          
          
          
          
          
          
          <li><a href="reference_docker_tangle_server.html">Jazz (TNG) The Tangle Server</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Server Reference</a>
      <ul>
          
          
          
          <li><a href="reference_server_setup.html">Server internals and setup</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Using Jazz</a>
      <ul>
          
          
          
          <li><a href="using_jazz_today.html">What is the usable part of Jazz today?</a></li>
          
          
          
          
          
          
          <li><a href="using_compile_jazz.html">How can I compile Jazz and the clients?</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Contributing to Jazz</a>
      <ul>
          
          
          
          <li><a href="contributing_welcome_all.html">How can I help? What kind of skills are needed?</a></li>
          
          
          
          
      </ul>
   </li>
     
      
      
      <!-- if you aren't using the accordion, uncomment this block:
         <p class="external">
             <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
         </p>
         -->
</ul>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

            </div>
            
        

        <!-- Content Column -->
        <div class="col-md-9" id="tg-sb-content">
            <div class="post-header">
   <h1 class="post-title-main">API reference - Using Jazz as a cluster</h1>
</div>



<div class="post-content">

   
    <div class="summary">How Jazz nodes talk to each other</div>
   

    
    
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.

$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2,h3,h4' });

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 10);
  return false
})
  
});
</script>

<div id="toc"></div>

    


    


    

  <h2 id="jazz-as-a-cluster-philosophy">Jazz as a cluster (philosophy)</h2>

<p>Since Jazz is both an http client and an http server. Obviously, all nodes understand the binary details of tensors, kinds, tuples.
Furthermore, they and can “speak” the language of the Jazz API. The only other thing you need to make everything work, is configuring a
cluster. Once a cluster is configured, all Jazz nodes have a unique name across the cluster and every node knows the IP and port of every
other node by its name.</p>

<p>Based on that, you can make API calls like GET <code class="language-plaintext highlighter-rouge">///frankfurt//lmdb/base/key=//lmdb/my_base/my_key</code> which is an assignment across nodes.
Or even <code class="language-plaintext highlighter-rouge">///frankfurt//lmdb/baseXX/keyYY=///sydney//lmdb/baseSS/keyTT</code> performed in a third (neither <code class="language-plaintext highlighter-rouge">frankfurt</code> nor <code class="language-plaintext highlighter-rouge">sydney</code>) node.
You can also PUT to <code class="language-plaintext highlighter-rouge">///sydney//lmdb/baseSS/keyTT.raw</code> or GET from <code class="language-plaintext highlighter-rouge">///frankfurt//code/fun(//lmdb/ee/k)</code> or <code class="language-plaintext highlighter-rouge">///frankfurt//code/fun(&amp;[3])</code></p>

<p>Compared to what other systems provide: automatic replication, sharding, fault tolerance, etc. this looks very low level. Well, it is.
When Jazz was created, it had “the burden” of having to provide reliable distributed storage out of the box. Now we focus Jazz in a
different way: You can create the shared, replicated, fault tolerant storage <strong>in Jazz</strong>. Ultimately, <strong>only if you really need it</strong>. There
are many alternatives that provide these features “out of the box”. The only thing Jazz provides out of the box is what is described in
this page. Everything else, including more intelligent ways to distribute data across agents as agents become more intelligent, has to be
created <strong>inside Jazz</strong>.</p>

<h2 id="configuring-a-jazz-cluster">Configuring a Jazz cluster.</h2>

<p>Is just defining JAZZ_NODE_NAME_#, JAZZ_NODE_IP_# and JAZZ_NODE_PORT_# for each Jazz node in the <code class="language-plaintext highlighter-rouge">jazz_config.ini</code> file (or whatever
file you pass to the server at starting time). The <code class="language-plaintext highlighter-rouge">#</code> is replaced by a decimal number starting with 1 up to the number of nodes in the
cluster. You have to use all the consecutive numbers, the parser will stop looking at the first non match.</p>

<p>All names must be unique, IPs are just strings and should work when used in a URL, ports are integers.</p>

<p>Unless you do it intentionally for some reason, the cluster configuration should have the same values for these constants in all
the nodes <strong>and a different JAZZ_NODE_MY_NAME</strong> defining which of the nodes is the current node.</p>

<h2 id="the-golden-rules">The Golden Rules.</h2>

<ul>
  <li>The node name defined in a <code class="language-plaintext highlighter-rouge">///node/...</code> applies to everything until an assignment <code class="language-plaintext highlighter-rouge">=</code> character is found.</li>
  <li>In absence of a <code class="language-plaintext highlighter-rouge">///node/...</code> the node is the node you are talking to.</li>
  <li>A node definition can only be the first thing or the first thing after a <code class="language-plaintext highlighter-rouge">=</code>.</li>
</ul>

<h3 id="as-a-consequence">As a consequence:</h3>

<ul>
  <li>In GET <code class="language-plaintext highlighter-rouge">///frankfurt//code/fun(//lmdb/ee/k)</code> the entity <code class="language-plaintext highlighter-rouge">ee</code> is in <code class="language-plaintext highlighter-rouge">frankfurt</code>, not in the current node.</li>
  <li>In GET <code class="language-plaintext highlighter-rouge">///frankfurt//tt/k=//lmdb/ee/k</code> the entity <code class="language-plaintext highlighter-rouge">ee</code> is in the current node, not in <code class="language-plaintext highlighter-rouge">frankfurt</code>.</li>
  <li>GET <code class="language-plaintext highlighter-rouge">///frankfurt//tt/k=///frankfurt//lmdb/ee/k</code> is the right way to assign from <code class="language-plaintext highlighter-rouge">frankfurt</code> to <code class="language-plaintext highlighter-rouge">frankfurt</code>.</li>
  <li>GET <code class="language-plaintext highlighter-rouge">//code/fun(///frankfurt//lmdb/ee/k)</code> is malformed.</li>
</ul>

<h2 id="assignment-is-your-friend">Assignment is your friend</h2>

<p>To keep it simple, not everything can be done in just one line. We just saw <code class="language-plaintext highlighter-rouge">//code/fun(///frankfurt//lmdb/ee/k)</code> is malformed. You
may want to pass a block that is in <code class="language-plaintext highlighter-rouge">frankfurt</code> as an argument to a function in your local node. The way to do it is the two liner:
GET <code class="language-plaintext highlighter-rouge">deque\xx\~last=///frankfurt//lmdb/ee/k)</code> and GET <code class="language-plaintext highlighter-rouge">//code/fun(deque\xx\~plast)</code>.</p>

<p>Note that <strong>you created a volatile local</strong> block automatically by pushing it to an existing queue named <code class="language-plaintext highlighter-rouge">xx</code>. This avoids having to give
it a name (which could already exist and therefore replace an existing item). It the second line, <strong>you destroyed the block</strong> by reading
it using <code class="language-plaintext highlighter-rouge">~plast</code> (pop last) rather than just <code class="language-plaintext highlighter-rouge">~last</code>.</p>






</div>



<footer>
            <div class="row">
                <div class="col-lg-12 footer">
               &copy;2024 kaalam.ai. All rights reserved. <br />
 Site last generated: Jan 27, 2024 <br />
<p><img src="images/company_logo.png" alt="Company logo"/></p>
                </div>
            </div>
</footer>


        </div>
    <!-- /.row -->
</div>
<!-- /.container -->
</div>
<!-- /#main -->
    </div>

</body>

</html>
