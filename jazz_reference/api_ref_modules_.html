<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="API terminology and how the different services work to serve API calls and how it works in Bebop and C++.">
<meta name="keywords" content=" ">
<title>API reference - How it works | Jazz User's Manual</title>
<link rel="stylesheet" href="css/syntax.css">

<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="css/modern-business.css">
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<link rel="stylesheet" href="css/customstyles.css">
<link rel="stylesheet" href="css/boxshadowproperties.css">
<!-- most color styles are extracted out to here -->
<link rel="stylesheet" href="css/theme-blue.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="js/jquery.navgoco.min.js"></script>


<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Anchor.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
<script src="js/toc.js"></script>
<script src="js/customscripts.js"></script>

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    <script>
        $(document).ready(function() {
            $("#tg-sb-link").click(function() {
                $("#tg-sb-sidebar").toggle();
                $("#tg-sb-content").toggleClass('col-md-9');
                $("#tg-sb-content").toggleClass('col-md-12');
                $("#tg-sb-icon").toggleClass('fa-toggle-on');
                $("#tg-sb-icon").toggleClass('fa-toggle-off');
            });
        });
    </script>
    

</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-static-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-home fa-lg navbar-brand" href="index.html">&nbsp;<span class="projectTitle"> Jazz User's Manual</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- toggle sidebar button -->
                <li><a id="tg-sb-link" href="#"><i id="tg-sb-icon" class="fa fa-toggle-on"></i> Nav</a></li>
                <!-- entries without drop-downs appear here -->




                
                
                
                <li><a href="http://kaalam.ai" target="_blank">kaalam.ai</a></li>
                
                
                
                <li><a href="https://github.com/kaalam/Jazz" target="_blank">GitHub</a></li>
                
                
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Quick Help<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        <li><a href="vision_intro_page.html">What is the vision? What does Jazz want to become?</a></li>
                        
                        
                        
                        <li><a href="reference_docker_latest_server.html">Where can I find the Latest Stable Server (Jazz LSS)?</a></li>
                        
                        
                        
                        <li><a href="contributing_welcome_all.html">How can I help?</a></li>
                        
                        
                        
                        <li><a href="/develop/" target="_blank">Jazz for developers</a></li>
                        
                        
                        
                        <li><a href="api_ref_intro.html">Jazz API introduction</a></li>
                        
                        
                        
                        <li><a href="/rjazz/" target="_blank">R client Reference</a></li>
                        
                        
                        
                        <li><a href="using_jazz_today.html">What is the usable part of Jazz today?</a></li>
                        
                        
                    </ul>
                </li>
                
                
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
  <div id="main">
    <!-- Content Row -->
    <div class="row">
        
        
            <!-- Sidebar Column -->
            <div class="col-md-3" id="tg-sb-sidebar">
                

<ul id="mysidebar" class="nav">
  <li class="sidebarTitle">Jazz 0.5.1</li>
  
  
  
  <li>
      <a href="#">Basic questions on Jazz</a>
      <ul>
          
          
          
          <li><a href="index.html">Welcome to Jazz!</a></li>
          
          
          
          
          
          
          <li><a href="vision_intro_page.html">What is the vision? What does Jazz want to be?</a></li>
          
          
          
          <li class="subfolders">
              <a href="#">The vision</a>
              <ul>
                  
                  
                  
                  <li><a href="vision_elements_block_kind_etc.html">Elements - Blocks, Kinds, Tuples, Tables and Fluxes</a></li>
                  
                  
                  
                  
                  
                  <li><a href="vision_elements_containers.html">Elements - Containers - Volatile, Remote and Persisted</a></li>
                  
                  
                  
                  
                  
                  <li><a href="vision_code_bebop.html">Code Generation - Formal Fields and Bebop</a></li>
                  
                  
                  
                  
                  
                  <li><a href="vision_agency_code.html">Agency - Code Automation</a></li>
                  
                  
                  
                  
                  
                  <li><a href="vision_apis_services.html">API, Services, Instances, etc.</a></li>
                  
                  
                  
              </ul>
          </li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Bebop fundamentals</a>
      <ul>
          
          
          
          <li><a href="bop_elements.html">Bebop elements</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Agency fundamentals</a>
      <ul>
          
          
          
          <li><a href="agency_elements.html">Agency elements</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">API fundamentals</a>
      <ul>
          
          
          
          <li><a href="api_ref_intro.html">API reference - Introduction</a></li>
          
          
          
          
          
          
          <li class="active"><a href="api_ref_modules_.html">API reference - How it works</a></li>
          
          
          
          
          
          
          <li><a href="api_ref_http_api.html">API reference - The http API</a></li>
          
          
          
          
          
          
          <li><a href="api_ref_names.html">API reference - Names</a></li>
          
          
          
          
          
          
          <li><a href="api_ref_locators.html">API reference - Locators</a></li>
          
          
          
          
          
          
          <li><a href="api_ref_const.html">API reference - Constants</a></li>
          
          
          
          
          
          
          <li><a href="api_ref_slicing.html">API reference - Block and tuple slicing</a></li>
          
          
          
          
          
          
          <li><a href="api_ref_contracts.html">API reference - Block and Container contracts</a></li>
          
          
          
          
          
          
          <li><a href="api_ref_fun_calls.html">API reference - Function calls</a></li>
          
          
          
          
          
          
          <li><a href="api_ref_get_head.html">API reference - GET and HEAD calls reference</a></li>
          
          
          
          
          
          
          <li><a href="api_ref_put.html">API reference - PUT calls reference</a></li>
          
          
          
          
          
          
          <li><a href="api_ref_assign.html">API reference - Assignment calls reference</a></li>
          
          
          
          
          
          
          <li><a href="api_ref_fluxes_agents.html">API reference - Fluxes, event and agents</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Docker reference</a>
      <ul>
          
          
          
          <li><a href="reference_docker_how_to_build.html">How to build your own Jazz Docker image</a></li>
          
          
          
          
          
          
          <li><a href="reference_docker_latest_server.html">Jazz (LSS) Latest Stable Server</a></li>
          
          
          
          
          
          
          <li><a href="reference_docker_tangle_server.html">Jazz (TNG) The Tangle Server</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Server Reference</a>
      <ul>
          
          
          
          <li><a href="reference_server_setup.html">Server internals and setup</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Using Jazz</a>
      <ul>
          
          
          
          <li><a href="using_jazz_today.html">What is the usable part of Jazz today?</a></li>
          
          
          
          
          
          
          <li><a href="using_compile_jazz.html">How can I compile Jazz and the clients?</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Contributing to Jazz</a>
      <ul>
          
          
          
          <li><a href="contributing_welcome_all.html">How can I help? What kind of skills are needed?</a></li>
          
          
          
          
      </ul>
   </li>
     
      
      
      <!-- if you aren't using the accordion, uncomment this block:
         <p class="external">
             <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
         </p>
         -->
</ul>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

            </div>
            
        

        <!-- Content Column -->
        <div class="col-md-9" id="tg-sb-content">
            <div class="post-header">
   <h1 class="post-title-main">API reference - How it works</h1>
</div>



<div class="post-content">

   
    <div class="summary">API terminology and how the different services work to serve API calls and how it works in Bebop and C++.</div>
   

    
    
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.

$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2,h3,h4' });

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 10);
  return false
})
  
});
</script>

<div id="toc"></div>

    


    


    

  <h2 id="the-different-apis---and-">The different APIS /, // and ///</h2>

<h3 id="the--api">The / API</h3>

<p>The / API refers to the storage in Jazz of static objects used to build webpages. It is a standard http API supporting anything starting
with just one / after the host name: (E.g., `http://kaalam.ai/kaalam/). This Api just delivers static content via GET for convenience.</p>

<p>There are two ways to upload that content:</p>

<ol>
  <li>The content of the folder configured as STATIC_HTML_AT_START will be uploaded automatically. The mime type will be guessed from the
file extension.</li>
  <li>Uploading a block (as raw binary) with the content to //static/ with the attributes BLOCK_ATTRIB_URL, BLOCK_ATTRIB_MIMETYPE and BLOCK_ATTRIB_LANGUAGE set to match the desired url.</li>
</ol>

<h3 id="the--api-1">The /// API</h3>

<p>Is not really a different API, it is just a call to the // API with an empty base. That call will be returned by the API object itself
returning things like: build versions, statistics, configuration settings, etc.</p>

<h3 id="the--api-2">The // API</h3>

<p>Is the real http API for anything (GET, PUT, DELETE, OPTIONS, HEAD) with blocks, contracts, function calls and event handling.
Every http AP call will start with <code class="language-plaintext highlighter-rouge">//base/...</code> where base is some base name.</p>

<h2 id="how-modules-fit-together">How modules fit together</h2>

<h3 id="all-the-api-is-steered-by-an-instance-of-the-class-api">All the API is steered by an instance of the class Api</h3>

<p>You can see how containers inherit each other <a href="/develop_jazz02/classjazz__elements_1_1Container.html">here</a>. There is one instance of
each of these services. The API is called by the http server’s callback function and “distributes the game”.</p>

<h3 id="api-is-a-container">API is a container</h3>

<p>The API inherits from Container (which is the one shot container) and, therefore, can allocate one shot blocks (used in constant
conversion, etc.). Executing an API query has two parts, <strong>parsing</strong> and <strong>executing</strong> (getting, locking, unlocking, running a contract,
etc.). The API parses the queries and forwards the execution to the appropriate container. In the case of the <code class="language-plaintext highlighter-rouge">///</code> API, that container
is the API itself.</p>

<h3 id="how-things-are-forwarded">How things are forwarded</h3>

<p>There are two mechanisms by which a container is implicitly specified in an API query: <strong>reserved contracts</strong> and <strong>reserved base names</strong>.
Priority-wise, reserved contracts have higher priority. E.g., A function call will always be forwarded to <strong>Bebop</strong> and Bebop may use
reserved base names to locate the data.</p>

<p>There are only two reserved contracts: <strong>function calls</strong> and <strong>event connections</strong>. Function calls are identified by the enclosing
brackets <code class="language-plaintext highlighter-rouge">(</code> and <code class="language-plaintext highlighter-rouge">)</code>. Function calls are forwarded to <code class="language-plaintext highlighter-rouge">Bebop</code>. Event connections are identified by the <code class="language-plaintext highlighter-rouge">@</code> (connect), <code class="language-plaintext highlighter-rouge">!@</code> (disconnect)
and <code class="language-plaintext highlighter-rouge">?</code> (send a constant value into a connection) and forwarded to <code class="language-plaintext highlighter-rouge">Agency</code>.</p>

<p>Reserved base names can be found in this table. Anything that is not in the list of reserved names will be forwarded to <code class="language-plaintext highlighter-rouge">Persisted</code>
assuming it is a database name. The reserved names from <code class="language-plaintext highlighter-rouge">Persisted</code> are also database names, but those databases are special and managed
by the Jazz node.</p>

<table>
  <thead>
    <tr>
      <th>Container</th>
      <th>Reserved base names</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>API</td>
      <td><code class="language-plaintext highlighter-rouge">&lt;empty&gt;</code> is the empty base name. As a consequence <code class="language-plaintext highlighter-rouge">///</code> calls are executed in the API itself.</td>
    </tr>
    <tr>
      <td>Volatile</td>
      <td><code class="language-plaintext highlighter-rouge">deque</code>, <code class="language-plaintext highlighter-rouge">map</code>, <code class="language-plaintext highlighter-rouge">tree</code>, <code class="language-plaintext highlighter-rouge">queue</code>. <br />E.g., (GET) <code class="language-plaintext highlighter-rouge">//deque.new("waiting_list")</code> <br />followed by (PUT) <code class="language-plaintext highlighter-rouge">//deque/waiting_list.l_push([1,2])</code></td>
    </tr>
    <tr>
      <td>Persisted</td>
      <td><code class="language-plaintext highlighter-rouge">sys</code>, <code class="language-plaintext highlighter-rouge">group</code>, <code class="language-plaintext highlighter-rouge">kind</code>, <code class="language-plaintext highlighter-rouge">field</code>, <code class="language-plaintext highlighter-rouge">flux</code>, <code class="language-plaintext highlighter-rouge">agent</code> and <code class="language-plaintext highlighter-rouge">static</code>. Are special databases to keep system config and all the groups, kinds, fields, fluxes, agents and static http served objects.</td>
    </tr>
    <tr>
      <td>Remote</td>
      <td><code class="language-plaintext highlighter-rouge">jazz_get</code> and <code class="language-plaintext highlighter-rouge">jazz_put</code> are the normal way to address sharded resources. <br /><code class="language-plaintext highlighter-rouge">jazz_broadcast</code> is generated automatically to keep cluster level synchronization, <br /><code class="language-plaintext highlighter-rouge">http_get</code> and <code class="language-plaintext highlighter-rouge">http_put</code> allow accessing REST APIs or resources outside the Jazz cluster.</td>
    </tr>
  </tbody>
</table>

<h2 id="api-terminology">API terminology:</h2>

<h3 id="answers">Answers</h3>

<p>An answer is a string (up to 4K characters long) built by the API to return, usually metadata. Some contracts return blocks, others
return answers. E.g., .as_json() will always return a block (of text) since the result may not fit in an answer. Metadata contracts like:
.columns(), .dimensions(), .size(), .type(), etc. always return answers.</p>

<h3 id="assignment-calls">Assignment calls</h3>

<p>Are GET calls assigning a block identified by an <strong>L-value</strong> from an <strong>R-value</strong> without the data being communicated.</p>

<h3 id="constants">Constants</h3>

<p>Constants are small (limited by the query size) blocks that we create for the purpose of the query, to pass as arguments to a function,
slice blocks, or even store as blocks.</p>

<h3 id="contracts">Contracts</h3>

<p>Are similar to methods of an object. Blocks are not objects, they are just moveable data structures and, therefore, have no methods.
Something (either some block class or some container, that is irrelevant for the API) fulfills the contract of delivering what a method
would. E.g., .as_json()</p>

<h3 id="event-handlers-and-agency">Event handlers and agency</h3>

<p>Agents are graphs of functions that connect to events in fluxes. API-wise the connection to agents will be done by reading/writing
in their fluxes, but there is also an agency interface to manually, connect <code class="language-plaintext highlighter-rouge">@</code>, disconnect <code class="language-plaintext highlighter-rouge">!@</code> and query <code class="language-plaintext highlighter-rouge">?</code> agents that will be
directed to the agency service.</p>

<h3 id="fluxes">Fluxes</h3>

<p>Are endpoints for event driven data streaming. API-wise they are just tuples with specific item names to define the interface.</p>

<h3 id="function-calls">Function calls</h3>

<p>Bebop function are just blocks. Function calls are (API-wise) contracts. As you probably expect, there is syntactic sugar involved
in the <strong>only</strong> use of round brackets in this API: <code class="language-plaintext highlighter-rouge">a(4)</code> rather than <code class="language-plaintext highlighter-rouge">a.call(new_block_from_constant(4))</code>. In Bebop, all functions
take a tuple as an argument and return a tuple. Since a tuple <strong>is</strong> a sequence of anything (including tuples), that is not a limitation.</p>

<h3 id="get-and-head-calls">GET and HEAD calls</h3>

<p>Are calls returning something (a block, or possibly an answer) from an <strong>R-value</strong>.</p>

<h3 id="l-value">L-value</h3>

<p>Is computer science terminology for the <strong>left</strong> part of an assignment operation. “An L-value refers to an object that persists beyond
a single expression.” In simple terms: a block somewhere in the server described by a <strong>locator</strong>, but only the whole block, not
a transformation (selection, call, etc.).</p>

<h3 id="locators">Locators</h3>

<p>Locators are sequences of names identifying blocks, selections inside blocks, contracts, etc. Locators can be <strong>L-values</strong> (as the the left
part of an assignment statement) that identify a complete block only or <strong>R-values</strong> that identify a block and possibly some operations
that we want to apply to it (slicing, calling it as a function, serializing it as json, etc.)</p>

<h3 id="names">Names</h3>

<p>A name is a string of letters, numbers and underscores, starting with a letter, up to 31 characters long. Names are used to identify:
containers, sub-containers, blocks and contracts.</p>

<h3 id="put-calls">PUT calls</h3>

<p>Are calls assigning a block identified by an <strong>L-value</strong> from something uploaded, possibly involving a format change or setting attributes.</p>

<h3 id="r-value">R-value</h3>

<p>Is computer science terminology for the <strong>right</strong> part of an assignment operation. “An R-value is a temporary value that does not persist
beyond the expression that uses it.” In simple terms: the result of an operation involving, possibly multiple blocks, transformations,
selections, a function calls, contracts, etc.</p>

<h3 id="slicing">Slicing</h3>

<p>Slicing is filtering parts of a block. We use the term block in its most general sense (since everything is a block). It can be selecting
rows from a tensor, fields from a tuple, columns from a table, etc. More than one slicing contracts. Slices <strong>are contracts</strong>, there is
just some syntactic sugar to write <code class="language-plaintext highlighter-rouge">a[4]</code> instead of <code class="language-plaintext highlighter-rouge">a.slice(new_block_from_constant(4))</code>.</p>

<p><br /></p>






</div>



<footer>
            <div class="row">
                <div class="col-lg-12 footer">
               &copy;2021 kaalam.ai. All rights reserved. <br />
 Site last generated: Apr 11, 2021 <br />
<p><img src="images/company_logo.png" alt="Company logo"/></p>
                </div>
            </div>
</footer>


        </div>
    <!-- /.row -->
</div>
<!-- /.container -->
</div>
<!-- /#main -->
    </div>

</body>

</html>
