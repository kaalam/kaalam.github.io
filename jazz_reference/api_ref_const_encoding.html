<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Syntax for defining constant blocks, kinds and tuples">
<meta name="keywords" content=" ">
<title>API reference - Constants and %-encoding | Jazz User's Manual</title>
<link rel="stylesheet" href="css/syntax.css">

<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="css/modern-business.css">
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<link rel="stylesheet" href="css/customstyles.css">
<link rel="stylesheet" href="css/boxshadowproperties.css">
<!-- most color styles are extracted out to here -->
<link rel="stylesheet" href="css/theme-blue.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="js/jquery.navgoco.min.js"></script>


<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Anchor.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
<script src="js/toc.js"></script>
<script src="js/customscripts.js"></script>

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    <script>
        $(document).ready(function() {
            $("#tg-sb-link").click(function() {
                $("#tg-sb-sidebar").toggle();
                $("#tg-sb-content").toggleClass('col-md-9');
                $("#tg-sb-content").toggleClass('col-md-12');
                $("#tg-sb-icon").toggleClass('fa-toggle-on');
                $("#tg-sb-icon").toggleClass('fa-toggle-off');
            });
        });
    </script>
    

</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-static-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-home fa-lg navbar-brand" href="index.html">&nbsp;<span class="projectTitle"> Jazz User's Manual</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- toggle sidebar button -->
                <li><a id="tg-sb-link" href="#"><i id="tg-sb-icon" class="fa fa-toggle-on"></i> Nav</a></li>
                <!-- entries without drop-downs appear here -->




                
                
                
                <li><a href="http://kaalam.ai" target="_blank">kaalam.ai</a></li>
                
                
                
                <li><a href="https://github.com/kaalam/Jazz" target="_blank">GitHub</a></li>
                
                
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Quick Help<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        <li><a href="vision_intro_page.html">What is the vision? What does Jazz want to become?</a></li>
                        
                        
                        
                        <li><a href="reference_docker_latest_server.html">Where can I find the Latest Stable Server (Jazz LSS)?</a></li>
                        
                        
                        
                        <li><a href="contributing_welcome_all.html">How can I help?</a></li>
                        
                        
                        
                        <li><a href="/develop/" target="_blank">Jazz for developers</a></li>
                        
                        
                        
                        <li><a href="api_ref_intro.html">Jazz API introduction</a></li>
                        
                        
                        
                        <li><a href="using_jazz_today.html">What is the usable part of Jazz today?</a></li>
                        
                        
                    </ul>
                </li>
                
                
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
  <div id="main">
    <!-- Content Row -->
    <div class="row">
        
        
            <!-- Sidebar Column -->
            <div class="col-md-3" id="tg-sb-sidebar">
                

<ul id="mysidebar" class="nav">
  <li class="sidebarTitle">Jazz 0.5.2</li>
  
  
  
  <li>
      <a href="#">Basic questions on Jazz</a>
      <ul>
          
          
          
          <li><a href="index.html">Welcome to Jazz!</a></li>
          
          
          
          
          
          
          <li><a href="vision_intro_page.html">What is the vision? What does Jazz want to be?</a></li>
          
          
          
          <li class="subfolders">
              <a href="#">The vision</a>
              <ul>
                  
                  
                  
                  <li><a href="vision_elements_block_kind_etc.html">Elements - Blocks, Kinds, Tuples</a></li>
                  
                  
                  
                  
                  
                  <li><a href="vision_elements_containers.html">Elements - Containers - One Shot, Channels, Volatile and Persisted</a></li>
                  
                  
                  
                  
                  
                  <li><a href="vision_code_bebop.html">Code Generation - Formal Fields and Bebop</a></li>
                  
                  
                  
                  
                  
                  <li><a href="vision_agency_code.html">Agency - Code Automation</a></li>
                  
                  
                  
              </ul>
          </li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Bebop fundamentals (Jazz 0.6.x)</a>
      <ul>
          
          
          
          <li><a href="bop_elements.html">Bebop elements</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Agency fundamentals (Jazz 0.7.x)</a>
      <ul>
          
          
          
          <li><a href="agency_elements.html">Agency elements</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">API fundamentals</a>
      <ul>
          
          
          
          <li><a href="api_ref_intro.html">API reference - Introduction</a></li>
          
          
          
          
          
          
          <li><a href="api_ref_http_api.html">API reference - The http API</a></li>
          
          
          
          
          
          
          <li class="active"><a href="api_ref_const_encoding.html">API reference - Constants and %-encoding</a></li>
          
          
          
          
          
          
          <li><a href="api_ref_slicing.html">API reference - Block and tuple slicing</a></li>
          
          
          
          
          
          
          <li><a href="api_ref_fun_calls.html">API reference - Function calls</a></li>
          
          
          
          
          
          
          <li><a href="api_ref_assign.html">API reference - Assignment calls</a></li>
          
          
          
          
          
          
          <li><a href="api_ref_attributes.html">API reference - Attribute calls</a></li>
          
          
          
          
          
          
          <li><a href="api_ref_serialization.html">API reference - Block serialization calls</a></li>
          
          
          
          
          
          
          <li><a href="api_ref_jazz_cluster.html">API reference - Using Jazz as a cluster</a></li>
          
          
          
          
          
          
          <li><a href="api_ref_serving_frontend.html">API reference - Using Jazz to serve applications</a></li>
          
          
          
          
          
          
          <li><a href="api_ref_agency_wip.html">API reference - Agency bases (Work in Progress)</a></li>
          
          
          
          
          
          
          <li><a href="api_ref_bebop_wip.html">API reference - Bebop bases (Work in Progress)</a></li>
          
          
          
          
          
          
          <li><a href="api_ref_channel_zmq.html">API reference - Channel base 0-mq</a></li>
          
          
          
          
          
          
          <li><a href="api_ref_channel_bash.html">API reference - Channel base bash</a></li>
          
          
          
          
          
          
          <li><a href="api_ref_channel_file.html">API reference - Channel base file</a></li>
          
          
          
          
          
          
          <li><a href="api_ref_channel_http.html">API reference - Channel base http</a></li>
          
          
          
          
          
          
          <li><a href="api_ref_persisted_lmdb.html">API reference - Persisted base lmdb</a></li>
          
          
          
          
          
          
          <li><a href="api_ref_volatile_deque.html">API reference - Volatile base deque</a></li>
          
          
          
          
          
          
          <li><a href="api_ref_volatile_index.html">API reference - Volatile base index</a></li>
          
          
          
          
          
          
          <li><a href="api_ref_volatile_queue.html">API reference - Volatile base queue</a></li>
          
          
          
          
          
          
          <li><a href="api_ref_volatile_tree.html">API reference - Volatile base tree</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Docker reference</a>
      <ul>
          
          
          
          <li><a href="reference_docker_how_to_build.html">How to build your own Jazz Docker image</a></li>
          
          
          
          
          
          
          <li><a href="reference_docker_latest_server.html">Jazz (LSS) Latest Stable Server</a></li>
          
          
          
          
          
          
          <li><a href="reference_docker_tangle_server.html">Jazz (TNG) The Tangle Server</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Server Reference</a>
      <ul>
          
          
          
          <li><a href="reference_server_setup.html">Server internals and setup</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Using Jazz</a>
      <ul>
          
          
          
          <li><a href="using_jazz_today.html">What is the usable part of Jazz today?</a></li>
          
          
          
          
          
          
          <li><a href="using_compile_jazz.html">How can I compile Jazz and the clients?</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Contributing to Jazz</a>
      <ul>
          
          
          
          <li><a href="contributing_welcome_all.html">How can I help? What kind of skills are needed?</a></li>
          
          
          
          
      </ul>
   </li>
     
      
      
      <!-- if you aren't using the accordion, uncomment this block:
         <p class="external">
             <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
         </p>
         -->
</ul>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

            </div>
            
        

        <!-- Content Column -->
        <div class="col-md-9" id="tg-sb-content">
            <div class="post-header">
   <h1 class="post-title-main">API reference - Constants and %-encoding</h1>
</div>



<div class="post-content">

   
    <div class="summary">Syntax for defining constant blocks, kinds and tuples</div>
   

    
    
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.

$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2,h3,h4' });

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 10);
  return false
})
  
});
</script>

<div id="toc"></div>

    


    


    

  <h2 id="general-api-structure">General API structure</h2>

<h3 id="name-definition">Name definition</h3>

<p>A <code class="language-plaintext highlighter-rouge">Name</code> is a string of letters, numbers and “-_~” up to 31 characters long. There is an exception with the decimal “.” that is acceptable,
but only in a real number, not everywhere. The special “~” indicates a command, although that is <code class="language-plaintext highlighter-rouge">base</code> dependent. If the base does not
interpret it as a command, it could be just a key. E.g., in “//tree/my_game/node51~parent”, “~parent” is a command, but in
“//lmdb/my_game/node51~parent”, “node51~parent” is just a key. Commands, if they exist, are detailed in the reference of each base.</p>

<p>Everything in the API follows the <code class="language-plaintext highlighter-rouge">///node//base/entity/key++</code> format, where:</p>

<ul>
  <li>”///node” is an optional reference to a Jazz node in the cluster to which the call will be forwarded, otherwise the node to which you are
connecting will handle the call.</li>
  <li>”++” refers to something else (function call, slicing, etc. that is explained below.)</li>
  <li>“node”, “entity” and “key” are names.</li>
  <li>“base” is a known base inside a <code class="language-plaintext highlighter-rouge">Container</code>: 0-mq, file, bash, http, index, tree, queue, deque, lmdb, core, …</li>
</ul>

<h2 id="constants">Constants</h2>

<p>Constants are the exception to the <code class="language-plaintext highlighter-rouge">///node//base/entity/key++</code> format. They are delimited by <code class="language-plaintext highlighter-rouge">&amp;;</code> as in <code class="language-plaintext highlighter-rouge">&amp;this%20is%a%20constant;</code> and
since they are part of a url, must be <a href="https://en.wikipedia.org/wiki/Percent-encoding">%-encoded</a>. Any character that is not RFC 3986
section 2.2 or RFC 3986 section 2.3 must be percent encoded. You can write utf-8 by just %-encoding all the characters.</p>

<div class="alert alert-warning" role="alert"><i class="fa fa-warning"></i> <b>Important:</b> As an exception to this rule, In a function call or a filter, constants are not terminated by a <code class="language-plaintext highlighter-rouge">;</code>
but by the closing <code class="language-plaintext highlighter-rouge">)</code> or <code class="language-plaintext highlighter-rouge">]</code>.</div>

<p>There are two types of constants:</p>

<ul>
  <li>Internally, Jazz can serialize any Block as text, or make a Block from parsing that text. The text representation of a block can be passed to the API as a constant.</li>
  <li>URLs of external sources (E.g., a third part API) or file names, which can be very long, are constants even if they could match the
requirements of a <code class="language-plaintext highlighter-rouge">Name</code>.</li>
</ul>

<h2 id="how-constants-fit-in">How constants fit in</h2>

<p>There are four ways to insert a constant in an API call:</p>

<ul>
  <li>After the base, instead of the <code class="language-plaintext highlighter-rouge">/</code> <code class="language-plaintext highlighter-rouge">//file&amp;any_%_encoded_path;</code> or <code class="language-plaintext highlighter-rouge">//http&amp;http://my_api.org/something;</code></li>
  <li>In a block slice <code class="language-plaintext highlighter-rouge">//base/entity/key[&amp;[2,4,6]]</code></li>
  <li>In a function call <code class="language-plaintext highlighter-rouge">//base/entity/key(&amp;[2,4,6])</code></li>
  <li>In an assignment <code class="language-plaintext highlighter-rouge">//base/entity/key=&amp;[2,4,6];</code></li>
</ul>

<h2 id="constant-syntax">Constant Syntax</h2>

<p>Obviously, the constants that are urls or filenames will be passed to whatever service or file system expects them and that will define
their syntax.</p>

<p>The constants that are blocks have the following syntax:</p>

<h3 id="tensors">Tensors</h3>

<p>They have a shape defined by the sequence of square brackets E.g., <code class="language-plaintext highlighter-rouge">[[[1,2],[1,2]],[[1,2],[1,2]],[[1,2],[1,2]]]</code>. The shape must be
consistent. From an API call you can create tensors of CELL_TYPE_INTEGER (if no number has a decimal point, CELL_TYPE_DOUBLE, if any
number has a decimal point, and CELL_TYPE_STRING by quoting every element) as in <code class="language-plaintext highlighter-rouge">["1","two","THREE"]</code>. String serialization supports
common C escape sequences like \n, \t, \”, \\, \x3f, etc.</p>

<h3 id="kinds">Kinds</h3>

<p>A <code class="language-plaintext highlighter-rouge">Kind</code> is defined inside surrounding <code class="language-plaintext highlighter-rouge">{}</code> characters including all metadata. Inside the kind, each item is comma separated and defines
the item name, type and shape. Valid types are: “INTEGER”, “DOUBLE”, “BYTE”, “STRING”, “BOOLEAN”, “SINGLE”, “TIME”, “LONG_INTEGER”,
“BYTE_BOOLEAN”, “FACTOR” and “GRADE”. Dimensions are just names (without quotes) inside the shape.</p>

<p>E.g., <code class="language-plaintext highlighter-rouge">{"palette" : BYTE[10, height, num_col], "time" : TIME[3], "author" : STRING[40], "filter" : SINGLE[height, height, 3]}</code></p>

<p><strong>Note 1</strong>: The dimension <code class="language-plaintext highlighter-rouge">height</code> appears 3 times in the Kind. A tuple of this kind can have any value for <code class="language-plaintext highlighter-rouge">height</code>, but must have
the same value in the three places, otherwise it is not a tuple of this kind.</p>

<p><strong>Note 2</strong>: We do not %-encode the spaces for readability, but they should be in an API call.</p>

<h3 id="tuples">Tuples</h3>

<p>A <code class="language-plaintext highlighter-rouge">Tuple</code> is defined inside surrounding <code class="language-plaintext highlighter-rouge">()</code> characters including item names and data. Inside the tuple, each item is comma separated
and defines the item name and content. In an API call the types of the tensors are determined using the same rule explained for tensors.</p>

<p>E.g., <code class="language-plaintext highlighter-rouge">("weights" : [[17, 170], [112, 54], [207, 149]], "built" : [2021-08-01 07:13:14, NA], "author" : ["Billy Doe"])</code></p>

<p><strong>Note 1</strong>: The type TIME cannot be used directly like this from the rest API because of how types are automatically determined for tensors.
From the C++ API if the Kind is given and the item “build” has the type TIME, this can be serialized as it is.</p>

<p><strong>Note 2</strong>: We do not %-encode the spaces for readability, but they should be in an API call.</p>

<p><br /></p>






</div>



<footer>
            <div class="row">
                <div class="col-lg-12 footer">
               &copy;2021 kaalam.ai. All rights reserved. <br />
 Site last generated: Oct 18, 2021 <br />
<p><img src="images/company_logo.png" alt="Company logo"/></p>
                </div>
            </div>
</footer>


        </div>
    <!-- /.row -->
</div>
<!-- /.container -->
</div>
<!-- /#main -->
    </div>

</body>

</html>
